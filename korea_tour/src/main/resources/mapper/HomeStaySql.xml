<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.korea_tour.model.mapper.HomeStayMapper">

	<!-- 홈스테이 디테일 -  해당 집의 집이름, 주소1(출력) -->
	<select id="getHomeStayNameAndAddr" parameterType="int" resultType="homestay">
	SELECT title,addr1 FROM homeStay where homeStayNum=#{homeStayNum}
	</select>
	
	<!-- 해당집의 후기 수 (출력) -->
	<select id="countOfHouseAnswer" parameterType="int" resultType="int">
	SELECT count(*) FROM homeStayReview where homeStayNum=#{homeStayNum}
	</select>
	
	<!-- 해당 집의 각 항목별 평균별점 구하기 -->
	<!-- 1.cleanliness -->
	<select id="avgOfCleanliness" parameterMap="int" resultType="double">
	SELECT avg(cleanliness) FROM mydb.homeStayStar where homeStayNum=#{homeStayNum}
	</select>
	
	<!-- 2.communication -->
	<select id="avgOfCommunication" parameterMap="int" resultType="double">
	SELECT avg(communication) FROM mydb.homeStayStar where homeStayNum=#{homeStayNum}
	</select>
	
	<!-- 3.checkIn -->
	<select id="avgOfCheckIn" parameterMap="int" resultType="double">
	SELECT avg(checkIn) FROM mydb.homeStayStar where homeStayNum=#{homeStayNum}
	</select>
	
	<!-- 4.accuracy -->
	<select id="avgOfAccuracy" parameterMap="int" resultType="double">
	SELECT avg(accuracy) FROM mydb.homeStayStar where homeStayNum=#{homeStayNum}
	</select>
	
	<!-- 5.location -->
	<select id="avgOfLocation" parameterMap="int" resultType="double">
	SELECT avg(location) FROM mydb.homeStayStar where homeStayNum=#{homeStayNum}
	</select>
	
	<!-- 6.satisfactionForPrice -->
	<select id="avgOfSatisfactionForPrice" parameterMap="int" resultType="double">
	SELECT avg(satisfactionForPrice) FROM mydb.homeStayStar where homeStayNum=#{homeStayNum}
	</select>
	
	<!-- 호스트 집 사진 (출력) -->
	<select id="getHomeStayPhoto" parameterType="int" resultType="homestayphoto">
	SELECT * FROM homeStayPhoto WHERE homeStayNum=#{homeStayNum}
	</select>
	
	
	<!-- 소개글(출력) -->
	<select id="getHomeStayContent" parameterType="int" resultType="String">
	SELECT content FROM homeStay where homeStayNum=#{homeStayNum}
	</select>
	
	
	<!-- 편의시설(8개)및 ,애견동반, 흡연 (출력) -->
	<select id="getHomeStayFacility" parameterType="int" resultType="homestaydetail">
	SELECT * FROM homeStayDetail where homeStayNum=#{homeStayNum}
	</select>
	
</mapper>