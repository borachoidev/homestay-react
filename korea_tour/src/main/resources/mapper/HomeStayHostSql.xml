<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.korea_tour.model.mapper.HomeStayHostMapper">
   <insert id="insertHomeStay" parameterType="homestay">
      insert into homestay (title,addr1,addr2,content,approval,checkIn1,checkIn2,
      checkOut1,checkOut2,xpos,ypos,price,open)
      values (#{title},#{addr1},#{addr2},#{content},0,#{checkIn1},#{checkIn2},
      #{checkOut1},#{checkOut3},#{xpos},#{ypos},#{price},0)
   </insert>
   <insert id="insertHomeStayDetail" parameterType="homestaydetail">
      insert into homestaydetail (dogOk,smokingOk,maxPeople,email1,email2,hp,wifi,towel,breakfast,aircon,
      elecProduct,kitchen,bathroom,parking)
      values (#{dogOk},#{smokingOk},#{maxPeople},#{email1},#{email2},#{hp},#{wifi},#{towel},
      #{breakfast},#{aircon},#{elecProduct},#{kitchen},#{bathroom},#{parking})
   </insert>      
   <update id="updateHomeStay" parameterType="Hashmap">
   	update Homestay set title=#{dto.title}, 
   
   </update>
   
   <select id="getTotalCount" parameterType="int" resultType="int">
   	select count(*) from homeStayReservation where homestayNum=#{homestayNum}
   </select>
   <select id="getAllReservation" parameterType="hashmap" resultType="homestayreservation">
   	select * from homeStayReservation where homestayNum=#{homestayNum} and approval=#{approval} order by homeStayReservationNum asc Limit #{start},#{perPage}
   </select>
   <select id="getApprovalCount" parameterType="int" resultType="int">
    select count(*) from homeStayReservation where homeStayNum=#{homeStayNum} and approval=2
   </select>
   <select id="getApprovalReservation" parameterType="hashmap" resultType="homestayreservation">
   	select * from homeStayReservation where homeStayNum=#{homeStayNum} and approval=2 order by homeStayReservationNum asc Limit #{start},#{perPage}
   </select>
   <select id="getRefusedCount" parameterType="int" resultType="int">
    select count(*) from homeStayReservation where homeStayNum=#{homeStayNum} and approval=1
   </select>
   <select id="getRefusedReservation" parameterType="hashmap" resultType="homestayreservation">
   	select * from homeStayReservation where homeStayNum=#{homeStayNum} and approval=1 order by homeStayReservationNum asc Limit #{start},#{perPage}
   </select>
   <select id="getPendingCount" parameterType="int" resultType="int">
   	select count(*) from hoeStayReservation where homeStayNum=#{homeStayNum} and approval=0
   </select>
   <select id="getPendingReservation" parameterType="hashmap" resultType="homestayreservation">
    select * from homeStayReservation where homeStayNum=#{homeStayNum} and approval=2 order by homeStayReservationNum asc Limit #{start},#{perPage}
   </select>
   <select id="getReservation" parameterType="int" resultType="homestayreservation">
    select * from homeStayReservation where homeStayReservationNum=#{homeStayReservationNum}
   </select>
 	
 	<update id="updateApproval" parameterType="hashmap">
 		update homeStayReservation set approval=#{approval} where homeStayReservationNum=#{homeStayReservationNum}
 	</update>
</mapper>