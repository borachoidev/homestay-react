<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.korea_tour.model.mapper.PlaceAnswerMapper">
	<insert id="insertPlaceAnswer" parameterType="placeanswer">
		insert into
		placeAnswer
		(userNum,placeNum,content,writeDay,level,group,loginId,loginPhoto,deleted)
		values
		(#{userNum},#{placeNum},#{content},now(),0,#{group+1},#{loginId},#{loginPhoto},#{deleted})
	</insert>
	<insert id="insertPlaceAnswerRE" parameterType="placeanswer">
		insert into
		placeAnswer
		(userNum,placeNum,content,writeDay,level,group,loginId,loginPhoto,deleted)
		values
		(#{userNum},#{placeNum},#{content},now(),1,#{group},#{loginId},#{loginPhoto},#{deleted})
	</insert>
	<update id="deletePlaceAnswerByUser" parameterType="int">
		update placeAnswer set deleted=1 where placeAnswerNum=#{placeAnswerNum}
	</update>
	<update id="deletePlaceAnswerByAdmin" parameterType="int">
		update placeAnswer set deleted=2 where placeAnswerNum=#{placeAnswerNum}
	</update>
	<select id="getAnswerOfPlace" resultType="placeanswer">
		select * from placeAnswer order by group asc,level asc
	</select>
	<select id="getUserAnswer" parameterType="HashMap">
		select * from placeAnswer where userNum=#{userNum} and level=#{level} order by placeAnswerNum desc 
	</select>
	<select id="getAdminAnswer" parameterType="int">
		select * from placeAnswer where level=#{level} order by placeAnswerNum desc
	</select>
</mapper>