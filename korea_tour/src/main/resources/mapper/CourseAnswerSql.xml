<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.bitcamp.korea_tour.model.mapper.CourseAnswerMapper">
	<insert id="insertCourseAnswer" parameterType="courseanswer">
		insert into
		courseAnswer
		(userNum,courseNum,content,writeday,level,group,loginId,loginPhoto,deleted)
		values
		(#{userNum},#{courseNum},#{content},now(),0,#{group+1},#{loginId},#{loginPhoto},#{deleted})
	</insert>
	<insert id="insertCourseAnswerRE" parameterType="courseanswer">
		insert into
		courseAnswer
		(userNum,courseNum,content,writeday,level,group,loginId,loginPhoto,deleted)
		values
		(#{userNum},#{courseNum},#{content},now(),1,#{group},#{loginId},#{loginPhoto},#{deleted})
	</insert>
	<update id="deleteCourseAnswerByUser" parameterType="int">
		update courseAnswer set deleted=1 where courseAnswerNum=#{courseAnswerNum}
	</update>
	<update id="deleteCourseAnswerByAdmin" parameterType="int">
		update courseAnswer set deleted=2 where courseAnswerNum=#{courseAnswerNum}
	</update>
	<select id="getAnswerOfCourse" resultType="courseanswer">
		select * from courseAnswer order by group asc,level asc
	</select>
	<select id="getUserAnswer" parameterType="HashMap">
		select * from courseAnswer where userNum=#{userNum} and level=#{level} order by couresAnswerNum desc 
	</select>
	<select id="getAdminAnswer" parameterType="int">
		select * from courseAnswer where level=#{level} order by couresAnswerNum desc
	</select>
	
</mapper>