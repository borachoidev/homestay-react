<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.korea_tour.model.mapper.HomeStayReservationMapper">
	<select id="getTotalCount" parameterType="int" resultType="int">
		select count(*) from homeStayReservation where loginNum=#{loginNum}
	</select>
	<select id="getCountByWating" parameterType="int" resultType="int">
		select count(*) from homeStayReservation where approval=0 and loginNum=#{loginNum}
	</select>
	<select id="getCountByCancel" parameterType="int" resultType="int">
		select count(*) from homeStayReservation where (loginNum=#{loginNum} and approval=1) 
		or (loginNum=#{loginNum} and deleted=1)
	</select>
	<select id="getCountByApproved" parameterType="int" resultType="int">
		select count(*) from homeStayReservation where approval=2 and loginNum=#{loginNum}
	</select>
	<select id="getAllDatas" parameterType="hashmap" resultType="joinreservation">
		select a.homeStayReservationNum, a.writeday, b.title as homeTitle, a.checkInDay, a.checkOutDay, a.approval, a.deleted 
		from homeStayReservation a left join homeStay b on (a.homeStayNum=b.homeStayNum) 
		where a.loginNum=#{loginNum} 
		order by homeStayReservationNum asc LIMIT #{start},#{perPage}
	</select>
	<select id="getDatasByWating" parameterType="hashmap" resultType="joinreservation">
		select a.homeStayReservationNum, a.writeday, b.title as homeTitle, a.checkInDay, a.checkOutDay, a.approval, a.deleted 
		from homeStayReservation a left join homeStay b on (a.homeStayNum=b.homeStayNum) 
		where a.approval=0 and a.loginNum=#{loginNum} 
		order by homeStayReservationNum asc LIMIT #{start},#{perPage}
	</select>
	<select id="getDatasByCancel" parameterType="hashmap" resultType="joinreservation">
		select a.homeStayReservationNum, a.writeday, b.title as homeTitle, a.checkInDay, a.checkOutDay, a.approval, a.deleted 
		from homeStayReservation a left join homeStay b on (a.homeStayNum=b.homeStayNum) 
		where (a.loginNum=#{loginNum} and a.approval=1) or (a.loginNum=#{loginNum} and a.deleted=1)
		order by homeStayReservationNum asc LIMIT #{start},#{perPage}
	</select>
	<select id="getDatasByApproved" parameterType="hashmap" resultType="joinreservation">
		select a.homeStayReservationNum, a.writeday, b.title as homeTitle, a.checkInDay, a.checkOutDay, a.approval, a.deleted 
		from homeStayReservation a left join homeStay b on (a.homeStayNum=b.homeStayNum) 
		where a.approval=2
		order by homeStayReservationNum asc LIMIT #{start},#{perPage}
	</select>
</mapper>